{"version":3,"file":"list.component.js","sourceRoot":"","sources":["list.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, ElementRef, OnInit, ViewChild, NgZone} from \"@angular/core\";\nimport {List} from \"../../shared/list/list\";\nimport {ListService} from \"../../shared/list/list.service\";\nimport {ItemList} from \"../item-list.component\";\nimport {AppService} from \"../../app.service\";\nimport {ActivityIndicator} from \"../../components/activity-indicator.component\";\n\n@Component({\n  selector: \"page-list\",\n  templateUrl: \"app/pages/list/list.html\",\n  styleUrls: [\"app/pages/list/list.css\"],\n  directives : [ItemList, ActivityIndicator],\n  providers: [ListService]\n})\n\nexport class ListPage implements OnInit {\n  lists: Array<List> = [];\n  list: string = \"\";\n  isLoading = false;\n  listLoaded = false;\n\n  constructor(\n    private _appService: AppService,\n    private _listService: ListService,\n    private _zone: NgZone\n  ) {}\n\n  ngOnInit() {\n    this.isLoading = true;\n    this._listService.load()\n      .subscribe(loadedLists => {\n        loadedLists.forEach((listObject) => {\n          this.lists.unshift(listObject);\n        });\n        this.isLoading = false;\n        this.listLoaded = true;\n        //console.log(\"lists\", this.lists);\n      });\n  }\n\n  view(list: List) {\n    //console.log(\"view list...\", list);\n    this._appService.setPage(\"items\", {listId: list.id});\n  }\n\n  hideLoadingIndicator() {\n    this.isLoading = false;\n  }\n\n  add() {\n    //console.log(\"add list...\", this.list);\n    this._listService.add(this.list)\n      .subscribe(\n        listObject => {\n          this._zone.run(() => {\n            this.list = \"\";\n            this.lists.unshift(listObject);\n          });\n        },\n        () => {\n          alert(\"An error occurred while adding an item to your list.\");\n        }\n      )\n  }\n\n  back() {\n    this._appService.setPage(\"login\", {});\n  }\n\n  delete(item) {\n    //console.log(\"delete list...\", item);\n    this._listService.delete(item.id)\n      .subscribe(\n        responseSuccess => {\n          // Running the change detection in a zone ensures that change\n          // detection gets triggered if needed.\n          this._zone.run(() => {\n            this.lists.splice(item.index, 1);\n          });\n        },\n        () => {\n          this._zone.run(() => {\n            this.lists.splice(item.index, 1);\n          });\n          // for some reason this works but is throwing an error...\n          //alert(\"An error occurred while deleting an item from your list.\");\n        }\n      )\n  }\n}"]}