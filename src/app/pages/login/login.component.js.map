{"version":3,"file":"login.component.js","sourceRoot":"","sources":["login.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAuD,eAAe,CAAC,CAAA;AACvE,qBAAmB,wBAAwB,CAAC,CAAA;AAC5C,6BAA0B,gCAAgC,CAAC,CAAA;AAC3D,4BAAyB,mBAAmB,CAAC,CAAA;AAS7C;IAKE,mBACU,YAAyB,EACzB,WAAuB;QADvB,iBAAY,GAAZ,YAAY,CAAa;QACzB,gBAAW,GAAX,WAAW,CAAY;QALjC,gBAAW,GAAG,IAAI,CAAC;QACnB,qBAAgB,GAAG,KAAK,CAAC;QAOvB,IAAI,CAAC,IAAI,GAAG,IAAI,WAAI,EAAE,CAAC;QACvB,4CAA4C;QAC5C,mCAAmC;IACrC,CAAC;IAED,0BAAM,GAAN;QACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;YAC9B,KAAK,CAAC,6BAA6B,CAAC,CAAC;YACrC,MAAM,CAAC;QACT,CAAC;QAED,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,KAAK,EAAE,CAAC;QACf,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,CAAC;IACH,CAAC;IAED,yBAAK,GAAL;QAAA,iBAaC;QAZC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;aAC/B,SAAS,CACR;YACG,kCAAkC;YACnC,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;QACvC,CAAC,EACD,UAAC,KAAK;YACJ,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,KAAK,CAAC,+CAA+C,CAAC,CAAA;QACxD,CAAC,CACF,CAAC;IACN,CAAC;IAED,0BAAM,GAAN;QAAA,iBAaC;QAZC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;aAClC,SAAS,CACR;YACE,KAAK,CAAC,wCAAwC,CAAC,CAAC;YAChD,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,KAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,EACD,UAAC,KAAK;YACJ,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,CAAA;YAC3B,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAChC,CAAC,CACF,CAAC;IACN,CAAC;IAED,iCAAa,GAAb;QACE,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;IACvC,CAAC;IApEH;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,YAAY;YACtB,SAAS,EAAE,CAAC,0BAAW,CAAC;YACxB,WAAW,EAAE,4BAA4B;YACzC,SAAS,EAAE,CAAC,2BAA2B,CAAC;SACzC,CAAC;;iBAAA;IAgEF,gBAAC;AAAD,CAAC,AA9DD,IA8DC;AA9DY,iBAAS,YA8DrB,CAAA","sourcesContent":["import {Component, ElementRef, OnInit, ViewChild} from \"@angular/core\";\nimport {User} from \"../../shared/user/user\";\nimport {UserService} from \"../../shared/user/user.service\";\nimport {AppService} from \"../../app.service\";\n\n@Component({\n  selector: \"page-login\",\n  providers: [UserService],\n  templateUrl: \"app/pages/login/login.html\",\n  styleUrls: [\"app/pages/login/login.css\"],\n})\n\nexport class LoginPage {\n  user: User;\n  isLoggingIn = true;\n  isAuthenticating = false;\n\n  constructor(\n    private _userService: UserService,\n    private _appService: AppService\n  ) {\n\n    this.user = new User();\n    // this.user.email = \"berman.tim@gmail.com\";\n    // this.user.password = \"Shiznit!\";\n  }\n\n  submit() {\n    if (!this.user.isValidEmail()) {\n      alert(\"Enter a valid email address\");\n      return;\n    }\n\n    this.isAuthenticating = true;\n    if (this.isLoggingIn) {\n      this.login();\n    } else {\n      this.signUp();\n    }\n  }\n\n  login() {\n    this._userService.login(this.user)\n      .subscribe(\n        () => {\n           //console.log(\"login success...\");\n          this.isAuthenticating = false;\n          this._appService.setPage(\"list\", {});\n        },\n        (error) => {\n          this.isAuthenticating = false;\n          alert(\"Unfortunately we could not find your account.\")\n        }\n      );\n  }\n\n  signUp() {\n    this._userService.register(this.user)\n      .subscribe(\n        () => {\n          alert(\"Your account was successfully created.\");\n          this.isAuthenticating = false;\n          this.toggleDisplay();\n        },\n        (error) => {\n          alert(error.json().message)\n          this.isAuthenticating = false;\n        }\n      );\n  }\n\n  toggleDisplay() {\n    this.isLoggingIn = !this.isLoggingIn;\n  }\n}"]}